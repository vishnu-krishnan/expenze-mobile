Technical Specification - Data Connectivity & Business Logic

Date: 2026-02-16

System overview
A Flutter-based financial tracking system using Provider for state management and SQLite for local persistence.

Architecture diagram (ASCII)

[ UI Layer ] <---- [ Provider ] <---- [ Repository ] <---- [ SQLite ]
(Dashboard,         (State,             (Queries,           (tables:
 Analytics)          Logic)              ORM)                expenses, 
                                                              categories)

Component breakdown
1. ExpenseRepository: Handles complex SQL aggregations for trends (AVG, MAX, SUM).
2. ExpenseProvider: Synchronizes data between screens; manages 'avgMonthlySpent' and 'maxMonthlySpent' state.
3. DashboardScreen: Implementation of dynamic category builders and navigation hooks.
4. AnalyticsScreen: Integration with fl_chart using real-time data series.

Data flow
- CRUD Operation -> Repository -> DB
- DB Update -> Repository -> Provider -> UI Rebuild

API contracts
- getTrends(int months): List<Map<String, dynamic>>
- getAnalyticsSummary(int months): Map<String, double>
- getCategoryBreakdown(String monthKey): List<Map<String, dynamic>>

Security model
- Local SQLite database with no external network exposure for financial data.
- Input validation on all amount and date fields.

Testing plan
- Validate total calculations against manual sum of entries.
- Verify trend line orientation (Oldest -> Newest).
- Verify navigation links from Dashboard to sub-screens.
